<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>音乐</title>
    <link href="../static/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../static/css/style.css" />
  </head>
  <body>
		<div class="row">
  		<div class="col-md-2 col-sm-6 col-xs-4">
  			<div class="music_logo">
  			<img src="../static/img/music_logo.png" height="55" />My Music
  			</div>
  		</div>
  		<div class="col-md-10 col-sm-6 col-xs-8">
  			<div class="admin_top_left_div">
		  			<a href=""><img src="../static/img/admin.png" height="19"/>admin </a>
		  			<a href=""><img src="../static/img/backstage.png" height="20"/>后台页面 </a>
		  			<a href="login.html" target="_parent"><img src="../static/img/quit.png" height="15"/>退出 </a>	
  			</div>
  		</div>
		</div>
		<div class="row">
  		<div class="col-md-2 col-sm-3 col-xs-4">
 					<dl>
 						<dt>日志</dt>
  					<dd><a href="Backstage_index.html"  target="_parent">后台登录日志</a></dd>
  					<dd><a href="Operation_log.html"  target="_parent">操作日志</a></dd>
  				</dl>
  				<dl>	
  					<dt>管理员</dt>
  					<dd><a href="Admin_maintain.html"  target="_parent">管理员维护</a></dd>
					</dl>
					<dl>
						<dt>音乐</dt>
						<dd><a href="Music_index.html"  target="_parent">音乐</a></dd>
					</dl>
  		</div>
  		<div class="col-md-10 col-sm-9 col-xs-8">
  			<ol class="breadcrumb text-primary">
				  <li>当前位置：</li>
				  <li>音乐</li>
				  <li class="active">音乐</li>
				</ol>
				  <div class="clean_float">
				  	<h4 class="fl">音乐</h4> 
				  	<button type="button" class="btn btn-primary  fr" data-toggle="modal" data-target="#myModal">新增</button>
				  </div>
				<div class="admin_table_div">
					<table class="table table-bordered table-hover table-condensed">
						<thead>
							<tr class="info">
								<th>ID</th>
								<th>音乐名</th>
								<th>URL</th>
								<th>图片</th>
								<th>歌手</th>
								<th>类型</th>
								<th>状态</th>
								<th>添加日期</th>
								<th>操作</th>
							</tr>
						</thead>
						<tbody>
							
						</tbody>
					</table>
				</div>	
	  		<nav aria-label="Page navigation">
				  <ul class="pagination">
				    <li>
				      <a href="#" aria-label="Previous">
				        <span aria-hidden="true">&laquo;</span>
				      </a>
				    </li>
				    <li><a href="#">1</a></li>
				    <li><a href="#">2</a></li>
				    <li><a href="#">3</a></li>
				    <li><a href="#">4</a></li>
				    <li><a href="#">5</a></li>
				    <li>
				      <a href="#" aria-label="Next">
				        <span aria-hidden="true">&raquo;</span>
				      </a>
				    </li>
				  </ul>
				</nav>
  		</div>
		</div>
<!--添加音乐-->
		<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		  <div class="modal-dialog" role="document">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		        <h4 class="modal-title" id="myModalLabel">添加音乐</h4>
		      </div>
		      <div class="modal-body">
		      		<form class="form-horizontal">
								  <div class="form-group">
								    <label for="SongName" class="col-sm-2 control-label">歌曲名</label>
								    <div class="col-sm-10">
								      <input type="text" class="form-control" id="SongName" placeholder="请输入歌曲名">
								    </div>
								  </div>
								  <div class="form-group">
								    <label for="SongUrl" class="col-sm-2 control-label">歌曲URL</label>
								    <div class="col-sm-10">
								      <input type="text" class="form-control" id="SongUrl" placeholder="请输入歌曲URL">
								    </div>
								  </div> 
								  <div class="form-group">
								    <label for="SongImg" class="col-sm-2 control-label">歌曲图片</label>
								    <div class="col-sm-10">
								      <input type="text" class="form-control" id="SongImg" placeholder="请输入歌曲图片">
								    </div>
								  </div>
								   <div class="form-group">
								    <label for="Singer" class="col-sm-2 control-label">歌手名</label>
								    <div class="col-sm-10">
								      <input type="text" class="form-control" id="Singer" placeholder="请输入歌手名">
								    </div>
								  </div>
								  <div class="form-group">
								    <label for="SongType" class="col-sm-2 control-label">类型</label>
								    <div class="col-sm-10">
								    	<select class="form-control" id="SongType">
											  <option value="0" selected="selected">未知 </option>
											  <option value="1">现代音乐</option>
											  <option value="2"> 古曲音乐</option>
											</select>
								    </div>
								  </div>
								  <div class="form-group">
								    <label  class="col-sm-2 control-label">状态</label>
								    <div class="col-sm-10">
								    	<label class="radio-inline">
											  <input type="radio" name="SongState" id="state1" value="0" checked="checked"> 正常
											</label>
											<label class="radio-inline">
											  <input type="radio" name="SongState" id="state2" value="1"> 禁用
											</label>
								    </div>
								  </div>
							</form>
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
		        <button type="button" class="btn btn-primary add">确定</button>
		      </div>
		    </div>
		  </div>
		</div>
		
		
<!--修改音乐-->	
		<div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1">
		  <div class="modal-dialog" role="document">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		        <h4 class="modal-title" id="myModalLabel1">修改音乐</h4>
		      </div>
		      <div class="modal-body">
		      		<form class="form-horizontal">
		      			<div class="form-group" style="display: none;">
								    <label for="SongId" class="col-sm-2 control-label">ID</label>
								    <div class="col-sm-10">
								      <input type="text" class="form-control" id="SongId1" placeholder="">
								    </div>
								  </div>
								  <div class="form-group">
								    <label for="SongName" class="col-sm-2 control-label">歌曲名</label>
								    <div class="col-sm-10">
								      <input type="text" class="form-control" id="SongName1" placeholder="">
								    </div>
								  </div>
								  <div class="form-group">
								    <label for="SongUrl" class="col-sm-2 control-label">歌曲URL</label>
								    <div class="col-sm-10">
								      <input type="text" class="form-control" id="SongUrl1" placeholder="">
								    </div>
								  </div> 
								  <div class="form-group">
								    <label for="SongImg" class="col-sm-2 control-label">歌曲图片</label>
								    <div class="col-sm-10">
								      <input type="text" class="form-control" id="SongImg1" placeholder="">
								    </div>
								  </div>
								   <div class="form-group">
								    <label for="Singer" class="col-sm-2 control-label">歌手名</label>
								    <div class="col-sm-10">
								      <input type="text" class="form-control" id="Singer1" placeholder="">
								    </div>
								  </div>
								  <div class="form-group">
								    <label for="SongType" class="col-sm-2 control-label">类型</label>
								    <div class="col-sm-10">
								    	<select class="form-control" id="SongType1">
											 	  <option value="0" selected="selected">未知</option>
												  <option value="1" >现代音乐</option>
												  <option value="2">古典音乐</option>
											</select>
								    </div>
								  </div>
								  <div class="form-group">
								    <label  class="col-sm-2 control-label">状态</label>
								    <div class="col-sm-10">
								    	<label class="radio-inline">
											  <input type="radio" name="SongState1" id="state3" value="0" checked="checked"> 正常
											</label>
											<label class="radio-inline">
											  <input type="radio" name="SongState1" id="state4" value="1"> 禁用
											</label>
								    </div>
								  </div>
							</form>
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
		        <button type="button" class="btn btn-primary"   onclick="Modify()" >确定</button>
		      </div>
		    </div>
		  </div>
		</div>		
		
		
		
		
		<script src="../static/js/jquery.min.js"></script>
    <script src="../static/js/bootstrap.min.js"></script>
    <script>
    	$("dt").click(function(){
    		$("dd").hide();
    		$(this).siblings().show();
    	});
		</script>
		<!--添加音乐-->	
		<script>
			$(document).ready(function(){
			  $('.add').click(function(){
			    var SongName=$("#SongName").val();
			    var SongUrl=$("#SongUrl").val();
			    var SongImg=$("#SongImg").val();
			    var Singer=$("#Singer").val();
			    if(SongName==null||SongName==""){
			    	alert("请输入歌曲名！！")
			    }else if(SongUrl==null||SongUrl==""){
			    	alert("请输入歌曲url！！")
			    }else if(SongImg==null||SongImg==""){
			    	alert("请输入歌曲图片！！")
			    }else if(Singer==null||Singer==""){
			    	alert("请输入歌手！！")
			    }else{
			    	$.ajax({
			    		url:"http://wangwei.hangyutech.com/study/music-add.php",
			    		data:{
			    					title:$("#SongName").val(),
										url	:$("#SongUrl").val(),
										img	:$("#SongImg").val(),
										singer:$("#Singer").val(),
										type:$("#SongType")	.val(),
										status:$("input[name='SongState']:checked").val()
										},
			    		type:"post",
			    		datatype:"json",
			    		async:false,
			    		success:function(song){
			    			if(song.status==1){
			    				alert(song.msg);
			    				window.location.reload();
			    			}else{
			    				alert(song.msg);
			    			}
			    			$("#myModal").modal("hide");
			    		}
			    	})
			    }
			    
			  });
			});
		</script>
		<!--表格获取数据-->
		<script>
			$(document).ready(function(){
				$.ajax({
					url:"http://wangwei.hangyutech.com/study/music.php",
					datatype:"json",
					type:"get",
					async:false,
					success:function(SongList){
						var td="";
						for(i=0;i<SongList.data.length;i++){
						td+="<tr>";
						td+="<td>"+SongList.data[i].id+"</td>";
						td+="<td>"+SongList.data[i].title+"</td>";
						td+="<td>"+SongList.data[i].url+"</td>";
						td+="<td>"+SongList.data[i].img+"</td>";
						td+="<td>"+SongList.data[i].singer+"</td>";
						/*判断类型*/
							switch(SongList.data[i].type){
	    					case"0":
	    					type="未知";
	    					break;
	    					case "1":
	    					type="现代音乐";
	    					break;
	    					case "2":
	    					type="古典音乐";
	    					break;
	    					default:
	    					type=""
	    				}
	    				td+="<td>"+type+"</td>";

						/*判断状态*/
						var status=SongList.data[i].status;
							if(status==0){
							status="正常";	
						}else if(status==1){
							status="禁用";
						}else{
							status="";
						}		;
						td+="<td>"+status+"</td>";
						td+="<td>"+SongList.data[i].created_time+"</td>";
						td+="<td><button type=\"button\" data-id=\""+SongList.data[i].id+"\" data-title=\""+SongList.data[i].title+"\" data-url=\""+SongList.data[i].url+"\" data-type=\""+SongList.data[i].type+"\" data-img=\""+SongList.data[i].img+"\" data-singer=\""+SongList.data[i].singer+"\" data-status=\""+SongList.data[i].status+"\" class=\"btn btn-default modify\" data-toggle=\"modal\" data-target=\"#myModal1\">修改</button><button type=\"button\"  class=\"btn btn-default\" onclick=\"del(this)\">删除</button></td>";
						td+="</tr>";
						}
						$("table tbody").html(td)
					}
				})
			});
		</script>
		<!--点击修改获取获取数据-->	
		<script>
			$(document).ready(function(){
			  $(".modify").click(function(){
			  	  var id=$(this).attr("data-id");
						var title=$(this).attr("data-title");
						var url=$(this).attr("data-url");
						var img=$(this).attr("data-img");
						var singer=$(this).attr("data-singer");
						var type=$(this).attr("data-type");
						var status=$(this).attr("data-status");
						$("#SongId1").val(id);
			    	$("#SongName1").val(title);	
			    	$("#SongUrl1").val(url);
			    	$("#SongImg1").val(img);	
			    	$("#Singer1").val(singer);
			    	$("#SongType1").val(type);
			    	$("input[name='SongState1']:checked").val(status);	
			    });	
			  });
		</script>
		<!--修改音乐-->
		<script>
			 function Modify(){ 
							$.ajax({
				    		url:"http://wangwei.hangyutech.com/study/music-add.php",
				    		data:{
				    			    id:$("#SongId1").val(),
				    					title:$("#SongName1").val(),	
								    	url:$("#SongUrl1").val(),
								    	img:$("#SongImg1").val(),	
								    	singer:$("#Singer1").val(),
								    	type:$("#SongType1").val(),
											status:$("input[name='SongState1']:checked").val()},
				    		type:"post",
				    		datatype:"json",
				    		async:false,
				    		success:function(Msong){
				    			if(Msong.status==1){
				    				alert(Msong.msg);
				    				window.location.reload();
				    			}else{
				    				alert(Msong.msg);
				    			}
				    			$("#myModal1").modal("hide");
				    		}
						  });
			    	};
		</script>
		<script>
		function del(del){
			$(del).parent().parent().remove();
		}
		/*function del(){ 
			
			 	 			var id=$(this).attr("data-id");
							$.ajax({
				        url:"http://wangwei.hangyutech.com/study/music-del.php",
				        type: "post",
				        dataType: "json",
				        data:{id:id},
				        async: false,
				        success: function(del){
				            if(del.status==1){
				            	alert("sadd");
				                alert(del.msg);
				                window.location.reload();
				            }else{
				            	alert("111");
				            	alert(del.msg);
				            }
				        },
				        error: function(){
				            console.log('服务器故障');
				        }
				        
				       });
			};*/
		</script>
  </body>
</html>



